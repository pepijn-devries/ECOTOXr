<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Download and extract ECOTOX database files and compose database — download_ecotox_data • ECOTOXr</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Download and extract ECOTOX database files and compose database — download_ecotox_data"><meta name="description" content=" In order for this package to fully function, a local copy of the ECOTOX database
needs to be build. This function will download the required data and build the database."><meta property="og:description" content=" In order for this package to fully function, a local copy of the ECOTOX database
needs to be build. This function will download the required data and build the database."><meta property="og:image" content="https://pepijn-devries.github.io/ECOTOXr/logo.svg"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ECOTOXr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.1.0012</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/ecotox-schema.html">ECOTOX database schema</a></li>
    <li><a class="dropdown-item" href="../articles/reproducibility.html">Reproducibility</a></li>
    <li><a class="dropdown-item" href="../articles/searching-ecotox.html">Searching ECOTOX</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/pepijn-devries/ECOTOXr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Download and extract ECOTOX database files and compose database</h1>
      <small class="dont-index">Source: <a href="https://github.com/pepijn-devries/ECOTOXr/blob/main/R/init.r" class="external-link"><code>R/init.r</code></a></small>
      <div class="d-none name"><code>download_ecotox_data.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><a href="https://lifecycle.r-lib.org/articles/stages.html#stable" class="external-link"><img src="figures/lifecycle-stable.svg" alt="[Stable]"></a> In order for this package to fully function, a local copy of the ECOTOX database
needs to be build. This function will download the required data and build the database.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">download_ecotox_data</span><span class="op">(</span></span>
<span>  target <span class="op">=</span> <span class="fu"><a href="get_path.html">get_ecotox_path</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  write_log <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  ask <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  verify_ssl <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"ECOTOXr_verify_ssl"</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-target">target<a class="anchor" aria-label="anchor" href="#arg-target"></a></dt>
<dd><p>Target directory where the files will be downloaded and the database compiled. Default is
<code><a href="get_path.html">get_ecotox_path()</a></code>.</p></dd>


<dt id="arg-write-log">write_log<a class="anchor" aria-label="anchor" href="#arg-write-log"></a></dt>
<dd><p>A <code>logical</code> value indicating whether a log file should be written to the target path
<code>TRUE</code>.</p></dd>


<dt id="arg-ask">ask<a class="anchor" aria-label="anchor" href="#arg-ask"></a></dt>
<dd><p>There are several steps in which files are (potentially) overwritten or deleted. In those cases
the user is asked on the command line what to do in those cases. Set this parameter to <code>FALSE</code> in order
to continue without warning and asking.</p></dd>


<dt id="arg-verify-ssl">verify_ssl<a class="anchor" aria-label="anchor" href="#arg-verify-ssl"></a></dt>
<dd><p>When set to <code>FALSE</code> the SSL certificate of the host (EPA)
is not verified. Can also be set as option:
<code>options(ECOTOXr_verify_ssl = TRUE)</code>. Default is <code>TRUE</code>.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Arguments passed on to <code><a href="https://httr2.r-lib.org/reference/req_options.html" class="external-link">httr2::req_options()</a></code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Returns <code>NULL</code> invisibly.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function will attempt to find the latest download url for the ECOTOX database from the
<a href="https://cfpub.epa.gov/ecotox/index.cfm" class="external-link">EPA website</a> (see <code><a href="get_ecotox_url.html">get_ecotox_url()</a></code>).
When found it will attempt to download the zipped archive containing all required data. This data is then
extracted and a local copy of the database is build.</p>
<p>Use '<code><a href="https://rdrr.io/r/base/message.html" class="external-link">suppressMessages()</a></code>' to suppress the progress report.</p>
    </div>
    <div class="section level2">
    <h2 id="known-issues">Known issues<a class="anchor" aria-label="anchor" href="#known-issues"></a></h2>


<p>On some machines this function fails to connect to the database download URL from the
<a href="https://cfpub.epa.gov/ecotox/index.cfm" class="external-link">EPA website</a> due to missing
SSL certificates. Unfortunately, there is no easy fix for this in this package. A work around is to download and
unzip the file manually using a different machine or browser that is less strict with SSL certificates. You can
then call <code><a href="build_ecotox_sqlite.html">build_ecotox_sqlite()</a></code> and point the <code>source</code> location to the manually extracted zip
archive. For this purpose <code><a href="get_ecotox_url.html">get_ecotox_url()</a></code> can be used. Alternatively, one could try to call <code>download_ecotox_data()</code>
by setting <code>verify_ssl = FALSE</code>; but only do so when you trust the download URL from <a href="get_ecotox_url.html">get_ecotox_URL()</a>.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other database-build-functions:
<code><a href="build_ecotox_sqlite.html">build_ecotox_sqlite</a>()</code>,
<code><a href="check_ecotox_build.html">check_ecotox_build</a>()</code>,
<code><a href="check_ecotox_version.html">check_ecotox_version</a>()</code>,
<code><a href="get_ecotox_url.html">get_ecotox_url</a>()</code></p>
<p>Other online-functions:
<code><a href="get_ecotox_url.html">get_ecotox_url</a>()</code>,
<code><a href="websearch.html">websearch_ecotox</a>()</code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Pepijn de Vries</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co">## This will download and build the database in your temp dir:</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu">download_ecotox_data</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Pepijn de Vries.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

